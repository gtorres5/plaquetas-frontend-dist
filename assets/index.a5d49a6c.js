import{p as e,a,b as i,r as t,o,c as s,d as l,e as n,t as d,w as c,v as r,f as m,g as p,h as u,F as g,i as _,j as h,k as f,l as b}from"./vendor.bba45878.js";const v={setup:()=>({image_str:"",tag:"Hemograma",type_file:""}),props:{id:Number,configuraciones:Object},data:()=>({visibilidad_modal:!1,count_items:null,visibilidad_contenido_plastado:!0,procesando:!1}),methods:{abrir_modal(e){this.visibilidad_modal=!0,document.getElementById("image_modal"+this.id).src=document.getElementById(e).src},cerrar_modal(){this.visibilidad_modal=!1},limpiar(){this.count_items=null,document.getElementById("file"+this.id).value="",document.getElementById("image"+this.id).src="",document.getElementById("image_final"+this.id).src="",this.$emit("emitido",{posicion:this.id,resultado:void 0})},async procesarImagen(){this.procesando=!0;let e=this.tag.replaceAll("á","a").replaceAll("é","e").replaceAll("í","i");for(e=e.replaceAll("ó","o").replaceAll("ú","u").replaceAll(" ","_"),e=e.replaceAll("(","").replaceAll(")","");e.split(".").length>2;)e=e.replace(".","_");try{const a="http://167.86.89.134/",{data:t}=await i.post(`${a}rn/reconize_objects`,{tag:e,image_data:this.image_str});this.count_items=t.count_items,document.getElementById("image_final"+this.id).src=`data:${this.type_file};base64,${t.image_data}`,this.procesando=!1,this.$emit("emitido",{posicion:this.id,resultado:this.count_items})}catch{alert("lo siento, sucedió un error"),this.procesando=!1}},subirImagen(){document.getElementById("file"+this.id).click()},resizeImage:e=>new Promise(((a,i)=>{var t=new Image;t.src=e;var o=document.createElement("canvas"),s=o.getContext("2d");o.width=540,o.height=588,s.drawImage(t,0,0,o.width,o.height);a(o.toDataURL())})),onFileSelected(){let e=[];e.push(this.id),this.putFileSrcOnImage(this.id).then((e=>{const{imgfinal:a,fileName:i,typeFile:t}=e;this.resizeImage(a).then((e=>{let a=e.replace("data:image/png;base64,","");this.putImageMetadata({result:a,fileName:i,typeFile:t})}))}));let a=0,i=document.getElementById("file"+this.id).files;for(let t=1;t<i.length;t++){let o=new DataTransfer,s=!1;o.items.add(i[t]);let l=this.id+t-1;do{if(l++,null===document.getElementById("file"+l)){if(!this.configuraciones.reiniciar_conteo||s){if(this.configuraciones.habilitar_cambio_cantidad_campos&&this.configuraciones.habilitar_cambio_campos_subida_multiple){o=new DataTransfer;for(let e=t;e<i.length;e++)o.items.add(i[e]);this.$emit("incrementar_campos_con_file",o)}return}s=!0,a++,l=a}}while(0!==document.getElementById("file"+l).files.length&&this.configuraciones.saltar);if(document.getElementById("file"+l).files=o.files,e.includes(l)){o=new DataTransfer;for(let e=t;e<i.length;e++)o.items.add(i[e]);return void this.$emit("incrementar_campos_con_file",o)}e.push(l),this.putFileSrcOnImage(l).then((e=>{const{imgfinal:a,fileName:i,typeFile:t}=e;this.resizeImage(a).then((e=>{let a=e.replace("data:image/png;base64,","");this.$emit("brother_image_metadata",{index:l,data:{result:a,fileName:i,typeFile:t}})}))}))}},putFileSrcOnImage:e=>new Promise(((a,i)=>{try{var t=null,o=document.getElementById("file"+e).files[0],s=new FileReader;if(o){let i=o.name,l=o.type,n=new Image;n.onload=function(){s.readAsDataURL(o),s.onloadend=function(){t=s.result,document.getElementById("image"+e).src=s.result,a({imgfinal:t,fileName:i,typeFile:l})}},n.src=URL.createObjectURL(o)}}catch(l){i(l)}})),putImageMetadata(e){this.image_str=e.result,this.tag=e.fileName,this.type_file=e.typeFile,!0===this.configuraciones.busqueda_automatica&&this.procesarImagen()}}},y=m();e("data-v-46ec4d85");const x={class:"px-6 py-1",style:{border:"solid","font-size":"25px","font-weight":"bold","background-color":"rgb(23 159 230)","border-radius":"11px",color:"#ffff"}},I=l("i",{class:"fas fa-angle-up"},null,-1),w=l("i",{class:"fas fa-angle-down"},null,-1),E={key:0,class:"p-2 bg-blue-300 rounded-md text-white mx-2"},k=l("i",{class:"fas fa-spinner fa-spin"},null,-1),B={class:"fondo_transparente"},F={class:"modal"},C=l("span",null,"x",-1),$={class:"modal_mensaje"};a();const z=y(((e,a,i,m,p,u)=>{const g=t("viewer");return o(),s("div",null,[l("div",x,[n(" plastado "+d(i.id)+" | "+d(null!==p.count_items?"Total: "+p.count_items:"")+" ",1),p.visibilidad_contenido_plastado?(o(),s("button",{key:0,style:{float:"right"},onClick:a[1]||(a[1]=e=>p.visibilidad_contenido_plastado=!1)},[I])):(o(),s("button",{key:1,style:{float:"right"},onClick:a[2]||(a[2]=e=>p.visibilidad_contenido_plastado=!0)},[w])),l("button",{style:{float:"right","background-color":"#b9810efc",color:"#f3f4f6","border-radius":"6px"},class:"mr-3 px-2",onClick:a[3]||(a[3]=(...e)=>u.limpiar&&u.limpiar(...e))}," limpiar ")]),l("input",{class:"hidden",type:"file",id:"file"+i.id,onChange:a[4]||(a[4]=(...e)=>u.onFileSelected&&u.onFileSelected(...e)),multiple:i.configuraciones.seleccion_multiple},null,40,["id","multiple"]),c(l("div",{class:["images",p.visibilidad_contenido_plastado?"contenido_visible py-5":"contenido_invisible"],style:{"border-radius":"10px","box-shadow":"3px 2px 4px 3px rgba(0,0,0,0.2)","border-top":"#4c5259","margin-bottom":"10px"}},[l("button",{class:"p-2 bg-red-500 text-white focus:outline-none mx-2",onClick:a[5]||(a[5]=e=>u.subirImagen())}," Subir imagen "),c(l("img",{src:"",class:"rounded-lg mt-5",style:{width:"20%",display:"inline"},alt:"",id:"image"+i.id},null,8,["id"]),[[r,p.visibilidad_contenido_plastado]]),p.procesando?(o(),s("button",E,[k])):(o(),s("button",{key:1,onClick:a[6]||(a[6]=e=>u.procesarImagen()),class:"p-2 bg-blue-500 rounded-md text-white focus:outline-none mx-2"}," Procesar ")),c(l("img",{src:"",class:"rounded-lg mt-5 ml-2",style:{width:"20%",display:"inline"},alt:"",id:"image_final"+i.id},null,8,["id"]),[[r,p.visibilidad_contenido_plastado]])],2),[[g]]),c(l("div",B,[l("div",F,[l("div",{class:"modal_cerrar",onClick:a[7]||(a[7]=(...e)=>u.cerrar_modal&&u.cerrar_modal(...e))},[C]),l("div",$,[l("img",{src:"",class:"rounded-lg mt-5 ml-2",style:{width:"100%",display:"inline"},alt:"",id:"image_modal"+i.id},null,8,["id"])])])],512),[[r,p.visibilidad_modal]])])}));v.render=z,v.__scopeId="data-v-46ec4d85";const S={components:{uploadImage:v},data:()=>({is_checked:!1,resultados:[],conteo_total:null,numero_de_campos:10,campos_encontrados:0,configuraciones:{busqueda_automatica:!1,habilitar_cambio_cantidad_campos:!0,seleccion_multiple:!0,saltar:!1,reiniciar_conteo:!0,habilitar_cambio_campos_subida_multiple:!0,consultar_cambio_campos_subida_multiple:!0}}),methods:{mover_a(e){document.getElementById(e).scrollIntoView()},add_resultado(e){this.resultados[e.posicion-1]=e.resultado,this.calcular_conteo_plaquetas()},SetMetadata(e){this.$refs["upload-image-"+e.index].putImageMetadata(e.data)},delete_campo(){this.numero_de_campos--,this.numero_de_campos===this.resultados.length&&this.resultados.pop(),this.calcular_conteo_plaquetas()},incrementar_campos_con_file(e){let a=!1;if(a=!this.configuraciones.consultar_cambio_campos_subida_multiple||confirm("deseas incrementar los campos?"),a){let a=this.numero_de_campos;this.numero_de_campos+=e.files.length,setTimeout((async()=>{for(let i=0;i<e.files.length;i++){a++;let t=new DataTransfer;t.items.add(e.files[i]),document.getElementById("file"+a).files=t.files;const o=await this.$refs["upload-image-"+a].putFileSrcOnImage(a),{imgfinal:s,fileName:l,typeFile:n}=await o,d=await this.$refs["upload-image-"+a].resizeImage(s);let c=await d.replace("data:image/png;base64,","");this.$refs["upload-image-"+a].putImageMetadata({result:c,fileName:l,typeFile:n})}}),3e3)}},calcular_conteo_plaquetas(){let e=0;this.campos_encontrados=0;for(let a=0;a<this.numero_de_campos;a++)void 0!==this.resultados[a]&&(e+=this.resultados[a],this.campos_encontrados++);if(this.campos_encontrados>0){let a=e/this.campos_encontrados;this.conteo_total=2e4*a}else this.conteo_total=null}}},q=m();e("data-v-07628152");const j=h('<header style="background-color:#398ffc;" data-v-07628152><div class="header-content" data-v-07628152><div class="logo" data-v-07628152><h1 data-v-07628152>Placken</h1></div><div class="menu" id="show-menu" data-v-07628152><nav data-v-07628152><ul data-v-07628152><li data-v-07628152><a href="#servicio" data-v-07628152><i class="fas fa-home" data-v-07628152></i> Inicio</a></li></ul></nav></div></div><div id="icon-menu" data-v-07628152><i class="fas fa-bars" data-v-07628152></i></div></header><div class="container-cover" data-v-07628152><div class="container-info-cover" data-v-07628152><h1 data-v-07628152>Importancia del proyecto</h1><p data-v-07628152>Esta investigación servirá para la elaboración de una alternativa de bajo costo para la realización de exámenes que sirven para el diagnóstico del dengue. Tendrá un efecto positivo en la comunidad iquiteña permitiendo al sector médico actuar con prontitud en los casos de dengue</p></div></div><div class="py-20 pl-10" id="informacion" style="background-color:#ffff;color:aliceblue;border-radius:16px;box-shadow:5px 4px 8px 6px rgba(0,0,0,0.2);padding:22px 26px;margin-top:16px;margin-left:16px;margin-right:16px;margin-bottom:16px;" data-v-07628152><h1 class="mb-4" style="font-size:30px;color:#6EC1E4;font-weight:bolder;" data-v-07628152>Objetivos del proyecto</h1><div style="padding:12px;margin-right:12px;color:#2b718f;" data-v-07628152> Esta investigación servirá para la elaboración de una alternativa de bajo costo para la realización de exámenes que sirven para el diagnóstico del dengue. Tendrá un efecto positivo en la comunidad iquiteña permitiendo al sector médico actuar con prontitud en los casos de dengue. Esta investigación fomentará el uso de tecnologías basadas en visión computacional para el apoyo al área médica. </div></div><hr data-v-07628152>',4),A={id:"servicio",name:"servicio",style:{"background-color":"#ffff",color:"#6EC1E4","border-radius":"16px","box-shadow":"5px 4px 8px 6px rgba(0,0,0,0.2)",padding:"22px 26px","margin-top":"16px","margin-left":"16px","margin-right":"16px","margin-bottom":"16px"}},N={class:"m-5 mt-1 pt-5"},T=l("h1",{class:"mb-4",style:{"font-size":"30px",color:"rgb(2 2 13)","font-weight":"bolder"}},"Servicio de conteo de plaquetas",-1),O={class:"mb-4"},D={class:"text-2xl mr-2",style:{display:"inline"}},M=l("br",null,null,-1),R={key:0,class:"mx-12 px-12 py-4",style:{"font-size":"40px",color:"honeydew","background-color":"slategrey"}},L=l("br",null,null,-1),P=l("div",{class:"col-md-4"},null,-1);a();const U=q(((e,a,i,t,c,r)=>{const m=p("upload-image");return o(),s("div",null,[j,l("div",A,[l("div",N,[T,l("div",O,[l("h1",D,"campos: "+d(c.numero_de_campos),1),l("button",{class:"py-1 px-3 bg-green-500 text-white focus:outline-none mx-1",style:{"border-radius":"16px"},onClick:a[1]||(a[1]=e=>c.numero_de_campos++)}," + "),c.numero_de_campos>5?(o(),s("button",{key:0,class:"py-1 px-3 bg-green-500 text-white focus:outline-none mx-1",style:{"border-radius":"3px"},onClick:a[2]||(a[2]=(...e)=>r.delete_campo&&r.delete_campo(...e))}," - ")):u("",!0)]),(o(!0),s(g,null,_(c.numero_de_campos,(e=>(o(),s(m,{key:e,id:e,configuraciones:c.configuraciones,ref:"upload-image-"+e,onEmitido:r.add_resultado,onBrother_image_metadata:r.SetMetadata,onIncrementar_campos_con_file:r.incrementar_campos_con_file},null,8,["id","configuraciones","onEmitido","onBrother_image_metadata","onIncrementar_campos_con_file"])))),128))]),M,null!==c.conteo_total?(o(),s("div",R,[n(" campos encontrados: "+d(c.campos_encontrados)+" El conteo es: ",1),L,n(" "+d(c.conteo_total)+" plt/mml ",1)])):u("",!0)]),P])}));S.render=U,S.__scopeId="data-v-07628152";const H=f(S);H.use(b),H.mount("#app");
